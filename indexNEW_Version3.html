<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>For Sapana ji üíñ</title>
    <style>
        body {
            background-color: #fff0f3;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: visible;
            text-align: center;
        }
        #mainContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }
        h1 { color: #ff4d6d; font-size: 2rem; margin: 20px 0; position: relative; z-index: 2; }
        .gif-container { position: relative; z-index: 2; }
        .gif-container img { width: 230px; border-radius: 20px; }
        
        .buttons-wrapper {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-top: 40px;
            position: relative;
            min-height: 56px;
            padding: 10px 20px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.25s ease;
            touch-action: manipulation;
        }

        #yesBtn { 
            background-color: #ff4d6d; 
            color: white; 
            position: relative;
            z-index: 5;
            will-change: transform;
            transform-origin: center center;
        }
        
        #noBtn { 
            background-color: #808080; 
            color: white; 
            position: absolute; 
            z-index: 100;
            white-space: nowrap;
            left: 55%; 
            top: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.3s ease;
        }

        .success-message { display: none; z-index: 1000; position: relative; }
    </style>
</head>
<body>

    <div id="mainContainer">
        <div class="gif-container">
            <img src="https://gifdb.com/images/high/cute-love-bear-roses-ou7zho5oosxnpo6k.gif" alt="Cute love bear with roses">
        </div>
        <h1>Sapana ji, will you be my Valentine? üåπ</h1>
        <div class="buttons-wrapper" aria-hidden="false">
            <button id="yesBtn" type="button" aria-label="Yes">Yes</button>
            <button id="noBtn" type="button" aria-label="No">No</button>
        </div>
    </div>

    <div class="success-message" id="successMessage" role="dialog" aria-live="polite" aria-hidden="true">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNHJpYnE0Z3BqYnE0Z3BqYnE0Z3BqYnE0Z3BqJmVwPXYxX2ludGVybmFsX2dpZl9ieV9pZCZjdD1z/26FLdmIp6wJr91JAI/giphy.gif" width="280" alt="Celebration gif">
        <h1 style="color: #ff4d6d;">Hehehe, I knew it! ‚ù§Ô∏è</h1>
        <p style="font-size: 1.2rem; color: #ff4d6d;">Best decision ever! See you soon. ü•∞</p>
    </div>

    <script>
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const mainContainer = document.getElementById('mainContainer');
        const successMessage = document.getElementById('successMessage');

        const messages = [
            "No", "Are you sure?", "Sapana ji, please?", "Pukka Pukka??", 
            "Think again!", "Dil tod doge?", "I'm gonna cry...", 
            "Look at the cute cat!", "Just click Yes already!", "Pretty please? ‚ù§Ô∏è"
        ];
        let msgIndex = 0;

        // Progressive growth variables
        let currentScale = 1;
        const GROW_STEP = 0.6; // how much scale increases per trigger (tune this)
        let finalScale = null; // computed per-viewport
        let wrapped = false;    // whether yesBtn is in the overlay wrapper
        let expanding = false;  // whether final reveal is in progress
        let wrapper = null;

        function computeFinalScale() {
            const rect = yesBtn.getBoundingClientRect();
            const vw = window.innerWidth;
            const vh = window.innerHeight;
            // Slightly bigger to ensure full coverage
            const scaleX = (vw * 1.05) / rect.width;
            const scaleY = (vh * 1.05) / rect.height;
            return Math.max(scaleX, scaleY, 1);
        }

        function ensureWrapped() {
            if (wrapped) return;
            // Create a fixed-position wrapper centered at the button's current center
            const rect = yesBtn.getBoundingClientRect();
            const btnCenterX = rect.left + rect.width / 2;
            const btnCenterY = rect.top + rect.height / 2;

            wrapper = document.createElement('div');
            wrapper.style.position = 'fixed';
            wrapper.style.left = `${btnCenterX}px`;
            wrapper.style.top = `${btnCenterY}px`;
            wrapper.style.transform = 'translate(-50%, -50%)';
            wrapper.style.zIndex = 9999;
            wrapper.style.pointerEvents = 'none'; // allow clicks to pass to children only if needed

            // Move yesBtn into wrapper
            yesBtn.style.position = 'relative';
            yesBtn.style.left = '0';
            yesBtn.style.top = '0';
            yesBtn.style.margin = '0';
            yesBtn.style.pointerEvents = 'auto';
            yesBtn.style.transition = 'transform 0.45s cubic-bezier(.22,.9,.2,1)';
            wrapper.appendChild(yesBtn);
            document.body.appendChild(wrapper);

            // compute finalScale now that we have rect
            finalScale = computeFinalScale();

            // move wrapper to center smoothly (first time)
            // allow wrapper to animate position change
            wrapper.style.transition = 'left 0.6s cubic-bezier(.2,.9,.2,1), top 0.6s cubic-bezier(.2,.9,.2,1)';
            // trigger reflow to ensure transition applies, then set to center
            requestAnimationFrame(() => {
                wrapper.style.left = '50%';
                wrapper.style.top = '50%';
            });

            wrapped = true;
        }

        function applyGrowStep() {
            if (expanding) return;
            // compute finalScale if not yet
            if (finalScale === null) finalScale = computeFinalScale();

            // increase scale progressively
            currentScale = Math.min(finalScale, currentScale + GROW_STEP);
            yesBtn.style.transform = `translate(-50%, -50%) scale(${currentScale})`;
            // ensure yesBtn visually centered inside wrapper
            yesBtn.style.transformOrigin = 'center center';
        }

        function checkForFinish() {
            if (currentScale >= finalScale - 0.01) {
                // small timeout to let the last scale animation finish
                expanding = true;
                // remove evasive behavior
                noBtn.style.pointerEvents = 'none';

                // wait for yesBtn transition to end before revealing success
                const onEnd = (e) => {
                    if (e.propertyName !== 'transform') return;
                    yesBtn.removeEventListener('transitionend', onEnd);

                    // hide main content and show success
                    mainContainer.style.display = 'none';
                    successMessage.style.display = 'block';
                    successMessage.setAttribute('aria-hidden', 'false');
                };
                yesBtn.addEventListener('transitionend', onEnd);
            }
        }

        function moveNoButton() {
            if (expanding) return;
            // Move no button around
            const randomX = Math.floor(Math.random() * 300) - 150; 
            const randomY = Math.floor(Math.random() * 200) - 100;
            noBtn.style.transform = `translate(calc(-50% + ${randomX}px), calc(-50% + ${randomY}px))`;

            // change text
            msgIndex = (msgIndex + 1) % messages.length;
            noBtn.innerText = messages[msgIndex];

            // prepare wrapper and progressively grow Yes
            ensureWrapped();
            applyGrowStep();
            checkForFinish();
        }

        // Ensure yesBtn remains centered inside wrapper visually
        // The wrapper uses translate(-50%,-50%) origin; yesBtn itself uses translate(-50%,-50%) so it centers.
        // Initially, yesBtn is in normal flow. Once wrapped it's moved into wrapper.

        // Evasive triggers
        noBtn.addEventListener('mouseenter', moveNoButton, { passive: true });
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveNoButton();
        }, { passive: false });
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            moveNoButton();
        });

        // If user clicks Yes directly, show success immediately
        yesBtn.addEventListener('click', () => {
            if (expanding) return;
            // Immediately show success
            // Clean up wrapper if present to avoid orphaned element positioning issues
            if (wrapper) wrapper.remove();
            mainContainer.style.display = 'none';
            successMessage.style.display = 'block';
            successMessage.setAttribute('aria-hidden', 'false');
        });

        // Recompute finalScale on resize so final target remains correct
        window.addEventListener('resize', () => {
            finalScale = computeFinalScale();
            // if already wrapped, keep current scale but allow further steps to reach new finalScale
        });
    </script>
</body>
</html>